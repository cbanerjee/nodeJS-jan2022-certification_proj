<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Home:News Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <style>
        .outerdiv {
            margin: 10px 10px 10px 10px;
        }

        body {
            padding-top: 70px;
        }
    </style>
</head>

<body>
    <%- include('header')%>
        <div class="outerdiv" style="margin: 50px;">
            <h2 class="blockquote text-center">News List</h2>
            <!-- <script>
                function productDelete(ctl,ID_) {
                    var oReq = new XMLHttpRequest();
                    console.log(ID_);
                    oReq.open("DELETE", `/deletenews_execute/${ID_}`);
                    oReq.send({id : ID_});
                    oReq.onload = function () {
                        json = JSON.parse(oReq.responseText);
                        if(json.message == "success") {
                            $(ctl).parents("tr").remove();
                        }
                    };
                }
            </script> -->
            <div class="table-responsive">
                <table class="table table-hover table-striped" id="myTable">
                    <thead class="thead-dark">
                        <tr>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Published At</th>
                            <th>Edit/Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for(var i=0; i<data.length; i++) {%>
                            <tr>
                                <td>
                                    <%=data[i].title%>
                                </td>
                                <td>
                                    <%=data[i].description %>
                                </td>
                                <td>
                                    <%=data[i].publishedAt%>
                                </td>
                                <td>
                                    <a id="<%=data[i]._id%>" 
                                        class="update btn btn-warning" href="/edit_news_object/<%=data[i]._id.toString()%>">Edit</a>
                                        <!-- type="button" onclick='editTableEntry("<%=data[i]._id%>")' -->
                                    <a class="delete btn btn-danger" id="<%=data[i]._id.toString()%>"
                                        href="/deletenews_execute/<%=data[i]._id%>")'>Delete</button>
                                </td>
                            </tr>
                            <%}%>
                    </tbody>
                </table>
            </div>
</body>

</html>